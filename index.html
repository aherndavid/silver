<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silver Trading AI - Live Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1428 100%);
            color: #e8eaf6;
            min-height: 100vh;
            padding: 2rem;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 700;
            background: linear-gradient(135deg, #60a5fa, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .subtitle { color: #94a3b8; margin-bottom: 2rem; }

        .alert-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 9999;
            padding: 1.5rem;
            color: white;
            display: none;
            align-items: center;
            justify-content: space-between;
            animation: slideDown 0.5s ease-out;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .alert-banner.buy { background: linear-gradient(135deg, #059669, #10b981); }
        .alert-banner.sell { background: linear-gradient(135deg, #dc2626, #ef4444); }
        .alert-banner.show { display: flex; }

        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
        }

        .stat-card.glow {
            animation: pulse 2s ease-in-out infinite;
            border-color: #3b82f6;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        .stat-label { color: #94a3b8; margin-bottom: 0.5rem; font-size: 0.9rem; }
        .stat-value { font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .stat-change { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; }

        .signal-buy { color: #10b981; }
        .signal-sell { color: #ef4444; }
        .signal-hold { color: #f59e0b; }

        .chart-container {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .chart {
            width: 100%;
            height: 300px;
            background: rgba(15, 23, 42, 0.5);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        canvas { width: 100%; height: 100%; }

        .alerts-list {
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .alert-item {
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .alert-item.buy {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .alert-item.sell {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-sound {
            background: rgba(100, 116, 139, 0.3);
            color: white;
            margin-left: 1rem;
        }

        .btn-sound.active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            background: rgba(30, 41, 59, 0.5);
            border: 1px solid rgba(100, 116, 139, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .indicator {
            padding: 1rem;
        }

        .indicator-label {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .indicator-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .stars { color: #f59e0b; }

        @media (max-width: 768px) {
            body { padding: 1rem; }
            .stat-value { font-size: 2rem; }
        }
    </style>
</head>
<body>
    <div class="alert-banner" id="alertBanner">
        <div id="alertMessage"></div>
        <button onclick="closeAlert()" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem; border-radius: 4px; cursor: pointer;">âœ•</button>
    </div>

    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 2rem;">
            <div>
                <h1>SILVER TRADING AI</h1>
                <p class="subtitle">Real-time XAG Analysis & On-Screen Alerts (12% Risk Threshold)</p>
            </div>
            <button class="btn btn-sound active" id="soundBtn" onclick="toggleSound()">ðŸ”Š Sound ON</button>
        </div>

        <div class="stats-grid">
            <div class="stat-card" id="priceCard">
                <div class="stat-label">Current Price</div>
                <div class="stat-value" id="currentPrice">$84.720</div>
                <div class="stat-change" id="priceChange">
                    <span>â†—</span>
                    <span>+0.00%</span>
                </div>
            </div>

            <div class="stat-card" id="signalCard">
                <div class="stat-label">Trading Signal</div>
                <div class="stat-value signal-hold" id="signal">HOLD</div>
                <div class="stars" id="strength">â˜†â˜†â˜†â˜†</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">RSI (14)</div>
                <div class="stat-value" id="rsi">50.00</div>
                <div class="stat-label" id="rsiStatus">Neutral</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">AI Prediction</div>
                <div class="stat-value" id="prediction">$84.850</div>
                <div class="stat-label" id="confidence">Confidence: 75%</div>
            </div>
        </div>

        <div class="chart-container">
            <h2 style="margin-bottom: 1rem;">Price History</h2>
            <div class="chart">
                <canvas id="priceChart"></canvas>
            </div>
        </div>

        <div class="indicators">
            <div class="indicator">
                <div class="indicator-label">MACD</div>
                <div class="indicator-value" id="macd">0.000</div>
            </div>
            <div class="indicator">
                <div class="indicator-label">SMA 20</div>
                <div class="indicator-value" id="sma20">$84.50</div>
            </div>
            <div class="indicator">
                <div class="indicator-label">SMA 50</div>
                <div class="indicator-value" id="sma50">$84.30</div>
            </div>
            <div class="indicator">
                <div class="indicator-label">Price vs SMA20</div>
                <div class="indicator-value" id="priceVsSma">+0.26%</div>
            </div>
        </div>

        <div class="alerts-list">
            <h2 style="margin-bottom: 1rem;">ðŸ”” Alert History (<span id="alertCount">0</span>)</h2>
            <div id="alertsList">
                <p style="color: #94a3b8; text-align: center; padding: 2rem;">Monitoring for trading opportunities...</p>
            </div>
        </div>
    </div>

    <script>
        // Trading System
        let currentPrice = 84.72;
        let priceHistory = [];
        let alerts = [];
        let soundEnabled = true;
        let lastAlertTime = 0;
        const ALERT_COOLDOWN = 60000; // 1 minute between same type alerts

        // Initialize with some history
        for (let i = 0; i < 50; i++) {
            currentPrice += (Math.random() - 0.5) * 0.3;
            priceHistory.push(parseFloat(currentPrice.toFixed(3)));
        }

        // Calculate RSI
        function calculateRSI(prices, period = 14) {
            if (prices.length < period) return 50;
            let gains = 0, losses = 0;
            for (let i = 1; i < period; i++) {
                const diff = prices[i] - prices[i - 1];
                if (diff >= 0) gains += diff;
                else losses -= diff;
            }
            const rs = (gains / period) / (losses / period);
            return 100 - (100 / (1 + rs));
        }

        // Calculate SMA
        function calculateSMA(prices, period) {
            if (prices.length < period) return prices[prices.length - 1] || 0;
            const slice = prices.slice(-period);
            return slice.reduce((sum, price) => sum + price, 0) / period;
        }

        // Calculate MACD
        function calculateMACD(prices) {
            return calculateSMA(prices, 12) - calculateSMA(prices, 26);
        }

        // Generate signal
        function generateSignal(rsi, macd, price, sma20, sma50) {
            let signal = 'HOLD', strength = 0;
            if (rsi < 30) { signal = 'BUY'; strength += 2; }
            else if (rsi > 70) { signal = 'SELL'; strength += 2; }
            if (macd > 0) { if (signal === 'HOLD') signal = 'BUY'; strength += 1; }
            else if (macd < 0) { if (signal === 'HOLD') signal = 'SELL'; strength += 1; }
            if (price > sma20 && sma20 > sma50) { if (signal !== 'SELL') signal = 'BUY'; strength += 1; }
            else if (price < sma20 && sma20 < sma50) { if (signal !== 'BUY') signal = 'SELL'; strength += 1; }
            return { signal, strength };
        }

        // Play sound
        function playSound(type) {
            if (!soundEnabled) return;
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.frequency.value = type === 'buy' ? 800 : 400;
            osc.type = 'sine';
            gain.gain.setValueAtTime(0.3, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.5);
            osc.start(ctx.currentTime);
            osc.stop(ctx.currentTime + 0.5);
        }

        // Show alert
        function showAlert(message, type) {
            const now = Date.now();
            if (now - lastAlertTime < ALERT_COOLDOWN) return;
            lastAlertTime = now;

            const banner = document.getElementById('alertBanner');
            const msgEl = document.getElementById('alertMessage');
            
            msgEl.textContent = message;
            banner.className = 'alert-banner ' + type + ' show';
            
            playSound(type);

            // Add to history
            alerts.unshift({
                message,
                type,
                time: new Date().toLocaleTimeString()
            });
            if (alerts.length > 20) alerts.pop();
            updateAlertsList();

            // Auto close
            setTimeout(() => {
                banner.classList.remove('show');
            }, 10000);
        }

        function closeAlert() {
            document.getElementById('alertBanner').classList.remove('show');
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            const btn = document.getElementById('soundBtn');
            btn.textContent = soundEnabled ? 'ðŸ”Š Sound ON' : 'ðŸ”‡ Sound OFF';
            btn.className = 'btn btn-sound' + (soundEnabled ? ' active' : '');
        }

        // Update UI
        function updateUI() {
            const current = priceHistory[priceHistory.length - 1];
            const previous = priceHistory[priceHistory.length - 2] || current;
            const change = ((current - previous) / previous * 100).toFixed(2);
            
            const rsi = calculateRSI(priceHistory);
            const macd = calculateMACD(priceHistory);
            const sma20 = calculateSMA(priceHistory, 20);
            const sma50 = calculateSMA(priceHistory, 50);
            const { signal, strength } = generateSignal(rsi, macd, current, sma20, sma50);
            
            // Update price
            document.getElementById('currentPrice').textContent = `$${current.toFixed(3)}`;
            const changeEl = document.getElementById('priceChange');
            changeEl.innerHTML = `<span>${change >= 0 ? 'â†—' : 'â†˜'}</span><span>${change >= 0 ? '+' : ''}${change}%</span>`;
            changeEl.style.color = change >= 0 ? '#10b981' : '#ef4444';
            
            // Update signal
            const signalEl = document.getElementById('signal');
            signalEl.textContent = signal;
            signalEl.className = 'stat-value signal-' + signal.toLowerCase();
            document.getElementById('strength').textContent = 'â˜…'.repeat(strength) + 'â˜†'.repeat(4 - strength);
            
            const signalCard = document.getElementById('signalCard');
            signalCard.className = strength >= 3 ? 'stat-card glow' : 'stat-card';
            
            // Update RSI
            document.getElementById('rsi').textContent = rsi.toFixed(2);
            const rsiStatus = rsi < 30 ? 'Oversold - BUY' : rsi > 70 ? 'Overbought - SELL' : 'Neutral';
            document.getElementById('rsiStatus').textContent = rsiStatus;
            document.getElementById('rsiStatus').style.color = rsi < 30 ? '#10b981' : rsi > 70 ? '#ef4444' : '#94a3b8';
            
            // Update indicators
            document.getElementById('macd').textContent = macd.toFixed(3);
            document.getElementById('macd').style.color = macd > 0 ? '#10b981' : '#ef4444';
            document.getElementById('sma20').textContent = `$${sma20.toFixed(2)}`;
            document.getElementById('sma50').textContent = `$${sma50.toFixed(2)}`;
            const priceVsSma = ((current - sma20) / sma20 * 100).toFixed(2);
            document.getElementById('priceVsSma').textContent = `${priceVsSma >= 0 ? '+' : ''}${priceVsSma}%`;
            document.getElementById('priceVsSma').style.color = priceVsSma >= 0 ? '#10b981' : '#ef4444';
            
            // Prediction
            const trend = priceHistory.slice(-10).reduce((sum, p, i, arr) => {
                if (i === 0) return 0;
                return sum + (arr[i] > arr[i-1] ? 1 : -1);
            }, 0);
            const predicted = current + (trend * 0.02);
            const confidence = Math.min(Math.abs(trend) * 10 + 60, 95);
            document.getElementById('prediction').textContent = `$${predicted.toFixed(3)}`;
            document.getElementById('confidence').textContent = `Confidence: ${confidence.toFixed(0)}% â€¢ ${trend > 0 ? 'UP' : 'DOWN'}`;
            
            // Check alerts
            if (strength >= 3) {
                showAlert(`${signal === 'BUY' ? 'ðŸŸ¢' : 'ðŸ”´'} STRONG ${signal} SIGNAL! Price: $${current.toFixed(2)} | RSI: ${rsi.toFixed(0)} | Strength: ${strength}/4`, signal.toLowerCase());
            }
            
            if (Math.abs(priceVsSma) >= 12) {
                showAlert(`âš ï¸ 12% THRESHOLD! Price moved ${priceVsSma}% from SMA20. Current: $${current.toFixed(2)}`, priceVsSma > 0 ? 'buy' : 'sell');
            }
            
            if (rsi < 25) {
                showAlert(`ðŸ“‰ EXTREME OVERSOLD! RSI: ${rsi.toFixed(0)} - Strong buy at $${current.toFixed(2)}`, 'buy');
            } else if (rsi > 75) {
                showAlert(`ðŸ“ˆ EXTREME OVERBOUGHT! RSI: ${rsi.toFixed(0)} - Consider sell at $${current.toFixed(2)}`, 'sell');
            }
            
            drawChart();
        }

        // Draw chart
        function drawChart() {
            const canvas = document.getElementById('priceChart');
            const ctx = canvas.getContext('2d');
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            
            const prices = priceHistory.slice(-50);
            const min = Math.min(...prices) * 0.995;
            const max = Math.max(...prices) * 1.005;
            const width = canvas.width;
            const height = canvas.height;
            const step = width / (prices.length - 1);
            
            // Draw grid
            ctx.strokeStyle = 'rgba(100, 116, 139, 0.2)';
            ctx.lineWidth = 1;
            for (let i = 0; i < 5; i++) {
                const y = (height / 4) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            // Draw price line
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            ctx.beginPath();
            prices.forEach((price, i) => {
                const x = i * step;
                const y = height - ((price - min) / (max - min)) * height;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            
            // Draw last price point
            const lastX = (prices.length - 1) * step;
            const lastY = height - ((prices[prices.length - 1] - min) / (max - min)) * height;
            ctx.fillStyle = '#3b82f6';
            ctx.beginPath();
            ctx.arc(lastX, lastY, 4, 0, Math.PI * 2);
            ctx.fill();
        }

        // Update alerts list
        function updateAlertsList() {
            const list = document.getElementById('alertsList');
            document.getElementById('alertCount').textContent = alerts.length;
            
            if (alerts.length === 0) {
                list.innerHTML = '<p style="color: #94a3b8; text-align: center; padding: 2rem;">Monitoring for trading opportunities...</p>';
                return;
            }
            
            list.innerHTML = alerts.map(alert => `
                <div class="alert-item ${alert.type}">
                    <div>${alert.message}</div>
                    <div style="color: #94a3b8; font-size: 0.875rem;">${alert.time}</div>
                </div>
            `).join('');
        }

        // Update price
        function updatePrice() {
            const change = (Math.random() - 0.5) * 0.5;
            currentPrice += change;
            priceHistory.push(parseFloat(currentPrice.toFixed(3)));
            if (priceHistory.length > 100) priceHistory.shift();
            updateUI();
        }

        // Start
        updateUI();
        setInterval(updatePrice, 5000); // Update every 5 seconds
        
        console.log('Silver Trading AI Bot - Running (12% Risk Threshold)');
    </script>
</body>
</html>
